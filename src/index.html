<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>Document</title>
  </head>
  <body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
      const root = document.getElementById('root');
      function MinutesToHours () {
        const [amount, setAmount] = React.useState(0);
        const [inverted, setInverted] = React.useState(false);
        const onChange = (event) => {
          setAmount((amount) => amount = event.target.value);
        }
        const reset = () => {
          setAmount((amount) => amount = 0);
        }
        const onFlip = () => {
          reset();
          setInverted((current) => !current);
        }
        return (
          <div>
            <br />
            <div>
              <label htmlFor="minutes">Minutes</label>
              <input 
                value={inverted ? amount * 60 : amount} 
                placeholder="Minutes" 
                type="number" 
                id="minutes" 
                onChange={onChange}
                disabled={inverted}
              />
              <h4>You want to convert {amount}</h4>
              <label htmlFor="hours">Hours</label>
              <input 
                value={inverted ? amount :  Math.floor((amount / 60) * 10) / 10}
                placeholder="Hours" 
                type="number" 
                id="hours"
                onChange={onChange}
                disabled={!inverted}
              />  
            </div>
            <button onClick={reset}>
              Reset
            </button>
            <button onClick={onFlip}>Flip</button>
          </div>
        );
      }
      function KmToMiles (){
        const [amount, setAmount]= React.useState(0);
        const [inverted, setInverted] = React.useState(false);
        const onChange = (event) => {
          setAmount((a) => a = event.target.value);
        }
        const reset = () => {
          setAmount((a) => a = 0);
        }
        const flipped = () => {
          reset();
          setInverted((i) => !i);
        }
        return (
          <div>
            <h3>KM to Miles</h3>
            <label for="km">km</label>
            <input 
              type="number" 
              id='km' 
              onChange={onChange} 
              value={inverted ? Math.round(amount / 0.621371 * 100) / 100 : amount} 
              disabled={inverted}
            />
            <h4>You want to convert {amount}</h4>
            <label for="miles">miles</label>
            <input 
              type="number" 
              id='miles' 
              onChange={onChange} 
              value={!inverted ? Math.round(amount * 0.621371 * 100) / 100 : amount} 
              disabled={!inverted}
            />
            <button onClick={reset}>  
              Reset
            </button>
            <button onClick={flipped}>  
              Flip
            </button>
          </div>
        )
      }
      function App () {
        const [index, setIndex] = React.useState('xx');
        const onSelect = (event) => {
          setIndex(event.target.value);
        }
        return (<>
          <h1>Super Converter</h1>
          <select value={index} onChange={onSelect} name="" id="">
            <option value="xx">Select your units</option>
            <option value="0">Minutes to Hours</option>
            <option value="1">km to Miles</option>
          </select>
          {index === 'xx' ?  <h4>Pleas select your units</h4> : null}
          {index === '0' ?  <MinutesToHours /> : null}
          {index === '1' ?  <KmToMiles /> : null}
        </>);
      }

      ReactDOM.render(<App />, root);
    </script>
  </body>
</html>